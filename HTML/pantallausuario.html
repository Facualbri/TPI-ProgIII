<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ofertas de Hoteles - Hotel tpi</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/pantallaUsuario.css">
</head>
<!-- MODAL RESULTADOS DE BÚSQUEDA -->
<div class="modal fade" id="modalResultados" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Resultados de la Búsqueda</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div class="row" id="resultadosContainer">
          <!-- Acá se van a insertar las cards filtradas -->
        </div>
      </div>

    </div>
  </div>
</div>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4 sticky-top">
        <div class="container">
            <a class="navbar-brand fs-4 fw-bold text-dark" href="#">La Hoja Dorada Hotelería ✨</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" id="navUserOptions">

                    <!-- BOTÓN MIS RESERVAS (solo si hay sesión) -->
                    <li class="nav-item d-none" id="navMisReservas">
                        <a href="../HTML/misReservas.html" class="btn btn-outline-primary me-3 shadow-sm">
                            <i class="bi bi-bookmark-fill"></i> Mis Reservas
                        </a>
                    </li>

                    <!-- BOTÓN INICIAR SESIÓN (solo si no hay sesión) -->
                    <li class="nav-item d-none" id="navIniciarSesion">
                        <a href="../HTML/login.html" class="btn btn-success me-3 shadow-sm">
                            <i class="bi bi-person-fill"></i> Iniciar Sesión
                        </a>
                    </li>

                    <!-- BOTÓN CERRAR SESIÓN (solo si está logueado) -->
                    <li class="nav-item d-none" id="navCerrarSesion">
                        <a href="#" id="btnCerrarSesion" class="btn btn-danger shadow-sm">
                            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                        </a>
                    </li>

                </ul>


            </div>
        </div>
    </nav>

    <div class="container my-5">

        <!-- FILTROS -->
        <div class="filtro-box p-4 mb-5">
            <h4 class="mb-4 filtro-titulo">
                <i class="bi bi-funnel-fill me-2"></i> Buscar Habitaciones
            </h4>

            <form id="searchForm" class="row g-4">

                <!-- Tipo -->
                <div class="col-md-5">
                    <label class="form-label filtro-label">Tipo de Habitación</label>
                    <select id="selectTipo" class="form-select filtro-input">
                        <option selected value="todos">Todas</option>
                        <option value="single">Single</option>
                        <option value="double">Double</option>
                        <option value="family">Family</option>
                        <option value="suite">Suite</option>
                    </select>
                </div>

                <!-- Precio -->
                <div class="col-md-5">
                    <label class="form-label filtro-label">Precio Máximo ($)</label>
                    <input type="number" id="inputPrecio" class="form-control filtro-input" placeholder="Ej: 200">
                </div>

                <!-- Botón -->
                <div class="col-md-2 d-flex align-items-end">
                    <button type="submit" class="btn btn-filtrar w-100">
                        <i class="bi bi-search"></i> Filtrar
                    </button>
                </div>

            </form>
        </div>

        <!-- CONTENEDOR DONDE SE CARGAN LAS HABITACIONES -->
        <div class="row" id="roomContainer">
            <!-- JS insertará aquí TODAS las cards dinámicamente -->
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../JS/tpi.js"></script>

    
    <script>
document.addEventListener("DOMContentLoaded", () => {

    // obtener usuario real (como objeto)
    const usuarioJson = localStorage.getItem("usuarioActivo");
    const usuario = usuarioJson ? JSON.parse(usuarioJson) : null;

    const btnMisReservas = document.getElementById("navMisReservas");
    const btnIniciar = document.getElementById("navIniciarSesion");
    const btnCerrar = document.getElementById("navCerrarSesion");

    // si NO hay usuario → mostrar Iniciar Sesion
    if (!usuario) {
        btnIniciar.classList.remove("d-none");
        return;
    }

    // si es admin → NO mostrar nada (no debe usar esta pantalla)
    if (usuario.role === "ADMIN") {
        btnIniciar.classList.remove("d-none");
        return;
    }

    // si es usuario normal logueado
    btnMisReservas.classList.remove("d-none");
    btnCerrar.classList.remove("d-none");
});
</script>


    <script type="module">
        import { protegerPantallaUsuario } from "../JS/tpi.js";
        protegerPantallaUsuario();
    </script>


</body>

</html>